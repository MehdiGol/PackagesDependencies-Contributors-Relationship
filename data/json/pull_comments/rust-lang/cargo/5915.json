[{"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/414471146", "html_url": "https://github.com/rust-lang/cargo/pull/5915#issuecomment-414471146", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5915", "id": 414471146, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNDQ3MTE0Ng==", "user": {"login": "rust-highfive", "id": 7378925, "node_id": "MDQ6VXNlcjczNzg5MjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/7378925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rust-highfive", "html_url": "https://github.com/rust-highfive", "followers_url": "https://api.github.com/users/rust-highfive/followers", "following_url": "https://api.github.com/users/rust-highfive/following{/other_user}", "gists_url": "https://api.github.com/users/rust-highfive/gists{/gist_id}", "starred_url": "https://api.github.com/users/rust-highfive/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rust-highfive/subscriptions", "organizations_url": "https://api.github.com/users/rust-highfive/orgs", "repos_url": "https://api.github.com/users/rust-highfive/repos", "events_url": "https://api.github.com/users/rust-highfive/events{/privacy}", "received_events_url": "https://api.github.com/users/rust-highfive/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-20T21:35:25Z", "updated_at": "2018-08-20T21:35:25Z", "author_association": "NONE", "body": "r? @alexcrichton\n\n(rust_highfive has picked a reviewer for you, use r? to override)"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/415937337", "html_url": "https://github.com/rust-lang/cargo/pull/5915#issuecomment-415937337", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5915", "id": 415937337, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNTkzNzMzNw==", "user": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-25T05:02:11Z", "updated_at": "2018-08-25T05:02:11Z", "author_association": "CONTRIBUTOR", "body": ":umbrella: The latest upstream changes (presumably #5939) made this pull request unmergeable. Please resolve the merge conflicts."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/416321030", "html_url": "https://github.com/rust-lang/cargo/pull/5915#issuecomment-416321030", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5915", "id": 416321030, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjMyMTAzMA==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-27T18:25:13Z", "updated_at": "2018-08-27T18:25:13Z", "author_association": "MEMBER", "body": "Looks reasonable to me!\r\n\r\n@sfackler as the other \"co champion\" of custom registries, do you have thoughts on this?"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/416330542", "html_url": "https://github.com/rust-lang/cargo/pull/5915#issuecomment-416330542", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5915", "id": 416330542, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjMzMDU0Mg==", "user": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-27T18:55:33Z", "updated_at": "2018-08-27T18:55:33Z", "author_association": "MEMBER", "body": "LGTM other than making sure that `cargo login --registry foo --token bar` works even if the registry doesn't support the login endpoint."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/416342833", "html_url": "https://github.com/rust-lang/cargo/pull/5915#issuecomment-416342833", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5915", "id": 416342833, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjM0MjgzMw==", "user": {"login": "withoutboats", "id": 9063376, "node_id": "MDQ6VXNlcjkwNjMzNzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/9063376?v=4", "gravatar_id": "", "url": "https://api.github.com/users/withoutboats", "html_url": "https://github.com/withoutboats", "followers_url": "https://api.github.com/users/withoutboats/followers", "following_url": "https://api.github.com/users/withoutboats/following{/other_user}", "gists_url": "https://api.github.com/users/withoutboats/gists{/gist_id}", "starred_url": "https://api.github.com/users/withoutboats/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/withoutboats/subscriptions", "organizations_url": "https://api.github.com/users/withoutboats/orgs", "repos_url": "https://api.github.com/users/withoutboats/repos", "events_url": "https://api.github.com/users/withoutboats/events{/privacy}", "received_events_url": "https://api.github.com/users/withoutboats/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-27T19:37:41Z", "updated_at": "2018-08-27T19:37:41Z", "author_association": "CONTRIBUTOR", "body": "@sfackler why should that work? If the registry doesn't support the v1 login flow, that wouldn't be meaningful. If they do support it, they should report that they do.\r\n\r\nImagine that we implement a new login flow in which `--token` is not meaningful, and the registry only supports that flow. Wouldn't we want that to error?"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/416368644", "html_url": "https://github.com/rust-lang/cargo/pull/5915#issuecomment-416368644", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5915", "id": 416368644, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjM2ODY0NA==", "user": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-27T21:05:52Z", "updated_at": "2018-08-27T21:05:52Z", "author_association": "MEMBER", "body": "What's the scope of the v1 login flow? Part of the v1 publish flow is that an `Authorization` header containing the auth token will be sent along with the request. Even if your custom registry server doesn't expose a /login or /me endpoint it can still support publishing. For example, the auth for our internal publishes is granted to individual builds so they know up front what token to use without any explicit login flow. We use `cargo login --registry foo --token $MY_CREDENTIALS` as a nicer form of `echo \"[registry.foo]\\ntoken = $MY_CREDENTIALS\" >> ~/.cargo/credentials`."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/416407354", "html_url": "https://github.com/rust-lang/cargo/pull/5915#issuecomment-416407354", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5915", "id": 416407354, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjQwNzM1NA==", "user": {"login": "withoutboats", "id": 9063376, "node_id": "MDQ6VXNlcjkwNjMzNzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/9063376?v=4", "gravatar_id": "", "url": "https://api.github.com/users/withoutboats", "html_url": "https://github.com/withoutboats", "followers_url": "https://api.github.com/users/withoutboats/followers", "following_url": "https://api.github.com/users/withoutboats/following{/other_user}", "gists_url": "https://api.github.com/users/withoutboats/gists{/gist_id}", "starred_url": "https://api.github.com/users/withoutboats/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/withoutboats/subscriptions", "organizations_url": "https://api.github.com/users/withoutboats/orgs", "repos_url": "https://api.github.com/users/withoutboats/repos", "events_url": "https://api.github.com/users/withoutboats/events{/privacy}", "received_events_url": "https://api.github.com/users/withoutboats/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-28T00:03:06Z", "updated_at": "2018-08-28T00:04:58Z", "author_association": "CONTRIBUTOR", "body": "That's a good question, and I see why you would think your registry doesn't support the v1 flow. I do just think it means storing an API token and passing it with the `Authorization` header, which is why for registries other than crates.io the message printed to stdout is modified to be less certain about the `/me` endpoint:\r\n\r\n> please paste the API Token below (you may be able to obtain your token by visiting https://$URL/me)\r\n\r\nThis should also be changed so that registries that don't assert they support a login flow but do support other commands are sent requests without any auth header (such registries are presumably relying on being run on an intranet, not saying its a good idea but its the semantic result of saying you support publish but not login)"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/423519474", "html_url": "https://github.com/rust-lang/cargo/pull/5915#issuecomment-423519474", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5915", "id": 423519474, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzUxOTQ3NA==", "user": {"login": "withoutboats", "id": 9063376, "node_id": "MDQ6VXNlcjkwNjMzNzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/9063376?v=4", "gravatar_id": "", "url": "https://api.github.com/users/withoutboats", "html_url": "https://github.com/withoutboats", "followers_url": "https://api.github.com/users/withoutboats/followers", "following_url": "https://api.github.com/users/withoutboats/following{/other_user}", "gists_url": "https://api.github.com/users/withoutboats/gists{/gist_id}", "starred_url": "https://api.github.com/users/withoutboats/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/withoutboats/subscriptions", "organizations_url": "https://api.github.com/users/withoutboats/orgs", "repos_url": "https://api.github.com/users/withoutboats/repos", "events_url": "https://api.github.com/users/withoutboats/events{/privacy}", "received_events_url": "https://api.github.com/users/withoutboats/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-21T12:48:30Z", "updated_at": "2018-09-21T12:48:30Z", "author_association": "CONTRIBUTOR", "body": "This feature is blocking custom registries landing, which is unfortunate. The main blocker on the PR has been that I have a lot of difficulty understanding how to cargo's test suite actually sets up the environment, so I've never been able to get CI to pass."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/429400696", "html_url": "https://github.com/rust-lang/cargo/pull/5915#issuecomment-429400696", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5915", "id": 429400696, "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTQwMDY5Ng==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-12T17:28:08Z", "updated_at": "2018-10-12T17:28:08Z", "author_association": "MEMBER", "body": "@withoutboats sorry for the late reply, but could I help out perhaps with getting `cargo test` working locally for you? Do you have some example error logs which I could help debug?"}]