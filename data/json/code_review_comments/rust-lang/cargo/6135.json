[{"url": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223138910", "pull_request_review_id": 162204052, "id": 223138910, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzEzODkxMA==", "diff_hunk": "@@ -537,6 +543,7 @@ name = \"{}\"\n version = \"0.1.0\"\n authors = [{}]\n edition = {}\n+publish = {}", "path": "src/cargo/ops/cargo_new.rs", "position": null, "original_position": 52, "commit_id": "1fd3f1b6f1c38a217f36da7f2536f5300ae32c4d", "original_commit_id": "abd9ac4feb60e335ba27f124001d22393f4e345d", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "body": "Could this be omitted when the default is crates.io?", "created_at": "2018-10-05T21:06:31Z", "updated_at": "2018-10-08T06:28:52Z", "html_url": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223138910", "pull_request_url": "https://api.github.com/repos/rust-lang/cargo/pulls/6135", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223138910"}, "html": {"href": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223138910"}, "pull_request": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/6135"}}}, {"url": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223139033", "pull_request_review_id": 162204052, "id": 223139033, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzEzOTAzMw==", "diff_hunk": "@@ -359,9 +360,22 @@ pub trait ArgMatchesExt {\n                          requires -Zunstable-options to use.\"\n                     ));\n                 }\n-                Ok(Some(registry.to_string()))\n+\n+                if registry == \"crates.io\" {", "path": "src/bin/cargo/command_prelude.rs", "position": null, "original_position": 14, "commit_id": "1fd3f1b6f1c38a217f36da7f2536f5300ae32c4d", "original_commit_id": "abd9ac4feb60e335ba27f124001d22393f4e345d", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "body": "I think this may be one of the few places that we accept this string, right? If so, could the special casing not be done here and perhaps later in a more centralized location?", "created_at": "2018-10-05T21:07:05Z", "updated_at": "2018-10-08T06:28:52Z", "html_url": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223139033", "pull_request_url": "https://api.github.com/repos/rust-lang/cargo/pulls/6135", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223139033"}, "html": {"href": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223139033"}, "pull_request": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/6135"}}}, {"url": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223147033", "pull_request_review_id": 162214370, "id": 223147033, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzE0NzAzMw==", "diff_hunk": "@@ -359,9 +360,22 @@ pub trait ArgMatchesExt {\n                          requires -Zunstable-options to use.\"\n                     ));\n                 }\n-                Ok(Some(registry.to_string()))\n+\n+                if registry == \"crates.io\" {", "path": "src/bin/cargo/command_prelude.rs", "position": null, "original_position": 14, "commit_id": "1fd3f1b6f1c38a217f36da7f2536f5300ae32c4d", "original_commit_id": "abd9ac4feb60e335ba27f124001d22393f4e345d", "user": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "body": "Small nit - `crates-io` is used rather than `crates.io` in `[patch]` blocks so it might make sense to use the same here for consistency.", "created_at": "2018-10-05T21:47:52Z", "updated_at": "2018-10-08T06:28:52Z", "html_url": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223147033", "pull_request_url": "https://api.github.com/repos/rust-lang/cargo/pulls/6135", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223147033"}, "html": {"href": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223147033"}, "pull_request": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/6135"}}, "in_reply_to_id": 223139033}, {"url": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223257701", "pull_request_review_id": 162339235, "id": 223257701, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzI1NzcwMQ==", "diff_hunk": "@@ -359,9 +360,22 @@ pub trait ArgMatchesExt {\n                          requires -Zunstable-options to use.\"\n                     ));\n                 }\n-                Ok(Some(registry.to_string()))\n+\n+                if registry == \"crates.io\" {", "path": "src/bin/cargo/command_prelude.rs", "position": null, "original_position": 14, "commit_id": "1fd3f1b6f1c38a217f36da7f2536f5300ae32c4d", "original_commit_id": "abd9ac4feb60e335ba27f124001d22393f4e345d", "user": {"login": "cswindle", "id": 16157454, "node_id": "MDQ6VXNlcjE2MTU3NDU0", "avatar_url": "https://avatars0.githubusercontent.com/u/16157454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cswindle", "html_url": "https://github.com/cswindle", "followers_url": "https://api.github.com/users/cswindle/followers", "following_url": "https://api.github.com/users/cswindle/following{/other_user}", "gists_url": "https://api.github.com/users/cswindle/gists{/gist_id}", "starred_url": "https://api.github.com/users/cswindle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cswindle/subscriptions", "organizations_url": "https://api.github.com/users/cswindle/orgs", "repos_url": "https://api.github.com/users/cswindle/repos", "events_url": "https://api.github.com/users/cswindle/events{/privacy}", "received_events_url": "https://api.github.com/users/cswindle/received_events", "type": "User", "site_admin": false}, "body": "> I think this may be one of the few places that we accept this string, right? If so, could the special casing not be done here and perhaps later in a more centralized location?\r\n\r\nI have made the string a constant (and updated other uses of it), so it is now just doing a string comparison, I did consider moving the logic into source_id, but we don't always need the source (for example in publish), so I have left it where it was. Is that ok?", "created_at": "2018-10-08T06:33:22Z", "updated_at": "2018-10-08T06:33:22Z", "html_url": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223257701", "pull_request_url": "https://api.github.com/repos/rust-lang/cargo/pulls/6135", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223257701"}, "html": {"href": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223257701"}, "pull_request": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/6135"}}, "in_reply_to_id": 223139033}, {"url": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223257905", "pull_request_review_id": 162339345, "id": 223257905, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzI1NzkwNQ==", "diff_hunk": "@@ -537,6 +543,7 @@ name = \"{}\"\n version = \"0.1.0\"\n authors = [{}]\n edition = {}\n+publish = {}", "path": "src/cargo/ops/cargo_new.rs", "position": null, "original_position": 52, "commit_id": "1fd3f1b6f1c38a217f36da7f2536f5300ae32c4d", "original_commit_id": "abd9ac4feb60e335ba27f124001d22393f4e345d", "user": {"login": "cswindle", "id": 16157454, "node_id": "MDQ6VXNlcjE2MTU3NDU0", "avatar_url": "https://avatars0.githubusercontent.com/u/16157454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cswindle", "html_url": "https://github.com/cswindle", "followers_url": "https://api.github.com/users/cswindle/followers", "following_url": "https://api.github.com/users/cswindle/following{/other_user}", "gists_url": "https://api.github.com/users/cswindle/gists{/gist_id}", "starred_url": "https://api.github.com/users/cswindle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cswindle/subscriptions", "organizations_url": "https://api.github.com/users/cswindle/orgs", "repos_url": "https://api.github.com/users/cswindle/repos", "events_url": "https://api.github.com/users/cswindle/events{/privacy}", "received_events_url": "https://api.github.com/users/cswindle/received_events", "type": "User", "site_admin": false}, "body": "I have updated this to exclude when using default registry.", "created_at": "2018-10-08T06:34:09Z", "updated_at": "2018-10-08T06:34:09Z", "html_url": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223257905", "pull_request_url": "https://api.github.com/repos/rust-lang/cargo/pulls/6135", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223257905"}, "html": {"href": "https://github.com/rust-lang/cargo/pull/6135#discussion_r223257905"}, "pull_request": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/6135"}}, "in_reply_to_id": 223138910}]