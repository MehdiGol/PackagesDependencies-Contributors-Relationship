[{"url": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/219556287", "pull_request_review_id": 157767771, "id": 219556287, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTU1NjI4Nw==", "diff_hunk": "@@ -34,6 +34,20 @@ system:\n   will otherwise be used.\n * `CARGO_CACHE_RUSTC_INFO` \u2014 If this is set to 0 then Cargo will not try to cache\n   compiler version information.\n+* `CARGO_STATUS` \u2014 If this is set, cargo will read it as compile progress template.\n+  The default format is `[%b] %f/%t: %n` which will looke like this:", "path": "src/doc/src/reference/environment-variables.md", "position": null, "original_position": 5, "commit_id": "2b7a7d3161c0ef506caab0362ff2da9aeb2c0322", "original_commit_id": "c1288f344d18d032c1221e2a5acdfada95180179", "user": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "body": "typo, will fix later", "created_at": "2018-09-21T16:32:08Z", "updated_at": "2018-09-26T22:40:09Z", "html_url": "https://github.com/rust-lang/cargo/pull/6070#discussion_r219556287", "pull_request_url": "https://api.github.com/repos/rust-lang/cargo/pulls/6070", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/219556287"}, "html": {"href": "https://github.com/rust-lang/cargo/pull/6070#discussion_r219556287"}, "pull_request": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/6070"}}}, {"url": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/219556616", "pull_request_review_id": 157767771, "id": 219556616, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxOTU1NjYxNg==", "diff_hunk": "@@ -209,48 +278,139 @@ impl<'cfg> State<'cfg> {\n }\n \n impl Format {\n-    fn progress(&self, cur: usize, max: usize) -> Option<String> {\n-        // Render the percentage at the far right and then figure how long the\n-        // progress bar is\n+    fn progress(&self, cur: usize, max: usize, active: usize, msg: &str) -> Option<String> {\n+        // if you edit this, please make sure to keep environment-variables.md up to date!\n+\n+        // %b progress bar\n+        // %s the number of started jobs\n+        // %f number of finished jobs\n+        // %t number of total\n+        // %u number of remaining jobs to start\n+        // %r number of active (currently running) jobs\n+        // %p progress percentage with decimals\n+        // %P progress percentage without decimals\n+        // %% plain '%' character\n+        // %n list of names of running jobs\n+\n+        let template = &self.formatting; // what the formatting is supposed to look like\n+         // what is left if we remove all dynamic parameters\n+         // will be \"[] /: \" for default formatting of \"[%b] %f/%t: %n\"\n+        let mut template_skelleton = template.to_string();\n+        for fmt in &[\"%b\", \"%f\", \"%t\", \"%p\", \"%P\", \"%%\", \"%n\", \"%r\", \"%s\", \"%u\"] {\n+            // remove all the formatting specifiers\n+            template_skelleton = template_skelleton.replace(fmt, \"\");\n+        }\n+        let length_of_formatters = template.len() - template_skelleton.len();\n+\n+        // Render the percentage at the far right and then figure how long the progress bar iscustom.compile_progress", "path": "src/cargo/util/progress.rs", "position": null, "original_position": 210, "commit_id": "2b7a7d3161c0ef506caab0362ff2da9aeb2c0322", "original_commit_id": "c1288f344d18d032c1221e2a5acdfada95180179", "user": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars2.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "body": "will also fix later", "created_at": "2018-09-21T16:33:29Z", "updated_at": "2018-09-26T22:40:09Z", "html_url": "https://github.com/rust-lang/cargo/pull/6070#discussion_r219556616", "pull_request_url": "https://api.github.com/repos/rust-lang/cargo/pulls/6070", "author_association": "CONTRIBUTOR", "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/219556616"}, "html": {"href": "https://github.com/rust-lang/cargo/pull/6070#discussion_r219556616"}, "pull_request": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/6070"}}}]