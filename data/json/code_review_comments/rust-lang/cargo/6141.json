[{"url": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223193014", "pull_request_review_id": 162269202, "id": 223193014, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzE5MzAxNA==", "diff_hunk": "@@ -86,19 +86,18 @@ pub enum Kind {\n }\n \n fn parse_req_with_deprecated(\n+    name: &str,\n     req: &str,\n     extra: Option<(&PackageId, &Config)>,\n ) -> CargoResult<VersionReq> {\n     match VersionReq::parse(req) {\n-        Err(e) => {\n+        Err(ReqParseError::DeprecatedVersionRequirement(requirement)) => {\n             let (inside, config) = match extra {\n                 Some(pair) => pair,\n-                None => return Err(e.into()),\n+                None => return Err(ReqParseError::DeprecatedVersionRequirement(requirement).into()),", "path": "src/cargo/core/dependency.rs", "position": 14, "original_position": 14, "commit_id": "8735e8b57d14b9a25a476124c28004de65c30cb9", "original_commit_id": "8735e8b57d14b9a25a476124c28004de65c30cb9", "user": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "body": "Deconstructing and reconstructing the `ReqParseError` is unfortunate.", "created_at": "2018-10-06T20:32:58Z", "updated_at": "2018-10-06T20:34:48Z", "html_url": "https://github.com/rust-lang/cargo/pull/6141#discussion_r223193014", "pull_request_url": "https://api.github.com/repos/rust-lang/cargo/pulls/6141", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223193014"}, "html": {"href": "https://github.com/rust-lang/cargo/pull/6141#discussion_r223193014"}, "pull_request": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/6141"}}}, {"url": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223193033", "pull_request_review_id": 162269202, "id": 223193033, "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyMzE5MzAzMw==", "diff_hunk": "@@ -109,18 +108,25 @@ This will soon become a hard error, so it's either recommended to\n update to a fixed version or contact the upstream maintainer about\n this warning.\n \",\n-                        req,\n-                        inside.name(),\n-                        inside.version(),\n-                        requirement\n-                    );\n-                    config.shell().warn(&msg)?;\n-\n-                    Ok(requirement)\n-                }\n-                e => Err(e.into()),\n-            }\n-        }\n+                req,\n+                inside.name(),\n+                inside.version(),\n+                requirement\n+            );\n+            config.shell().warn(&msg)?;\n+\n+            Ok(requirement)\n+        },\n+        Err(e) => {\n+            let err: CargoResult<VersionReq> = Err(e.into());\n+            let v: VersionReq = err.chain_err(|| {\n+                format!(\n+                    \"failed to parse the version requirement `{}` for dependency `{}`\",\n+                    req, name\n+                )\n+            })?;\n+            Ok(v)", "path": "src/cargo/core/dependency.rs", "position": 58, "original_position": 58, "commit_id": "8735e8b57d14b9a25a476124c28004de65c30cb9", "original_commit_id": "8735e8b57d14b9a25a476124c28004de65c30cb9", "user": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "body": "This is just confusing.  The \"CargoResult\" is always an `Err` so `?` will never result in an actual `VersionReq`.", "created_at": "2018-10-06T20:34:26Z", "updated_at": "2018-10-06T20:34:48Z", "html_url": "https://github.com/rust-lang/cargo/pull/6141#discussion_r223193033", "pull_request_url": "https://api.github.com/repos/rust-lang/cargo/pulls/6141", "author_association": "MEMBER", "_links": {"self": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/comments/223193033"}, "html": {"href": "https://github.com/rust-lang/cargo/pull/6141#discussion_r223193033"}, "pull_request": {"href": "https://api.github.com/repos/rust-lang/cargo/pulls/6141"}}}]