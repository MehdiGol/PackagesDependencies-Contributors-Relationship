[{"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/419707801", "html_url": "https://github.com/rust-lang/cargo/issues/5998#issuecomment-419707801", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5998", "id": 419707801, "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTcwNzgwMQ==", "user": {"login": "behnam", "id": 37169, "node_id": "MDQ6VXNlcjM3MTY5", "avatar_url": "https://avatars2.githubusercontent.com/u/37169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/behnam", "html_url": "https://github.com/behnam", "followers_url": "https://api.github.com/users/behnam/followers", "following_url": "https://api.github.com/users/behnam/following{/other_user}", "gists_url": "https://api.github.com/users/behnam/gists{/gist_id}", "starred_url": "https://api.github.com/users/behnam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/behnam/subscriptions", "organizations_url": "https://api.github.com/users/behnam/orgs", "repos_url": "https://api.github.com/users/behnam/repos", "events_url": "https://api.github.com/users/behnam/events{/privacy}", "received_events_url": "https://api.github.com/users/behnam/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-09T10:53:43Z", "updated_at": "2018-09-09T10:53:43Z", "author_association": "CONTRIBUTOR", "body": "/cc @alexcrichton "}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/419718613", "html_url": "https://github.com/rust-lang/cargo/issues/5998#issuecomment-419718613", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5998", "id": 419718613, "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTcxODYxMw==", "user": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars0.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-09T14:11:22Z", "updated_at": "2018-09-09T14:11:22Z", "author_association": "CONTRIBUTOR", "body": "@behnam indeed, cargo changes the lint cap based on the type of dependency.  Non-local dependencies (i.e. crates you cannot control) are `--cap-lints=allow` (unless you pass `-vv` in which case they become `--cap-lints=warn`).  Path dependencies do not cap lints, as these are probably crates you are working on or have control over (such as in a workspace)."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/419720570", "html_url": "https://github.com/rust-lang/cargo/issues/5998#issuecomment-419720570", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5998", "id": 419720570, "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTcyMDU3MA==", "user": {"login": "behnam", "id": 37169, "node_id": "MDQ6VXNlcjM3MTY5", "avatar_url": "https://avatars2.githubusercontent.com/u/37169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/behnam", "html_url": "https://github.com/behnam", "followers_url": "https://api.github.com/users/behnam/followers", "following_url": "https://api.github.com/users/behnam/following{/other_user}", "gists_url": "https://api.github.com/users/behnam/gists{/gist_id}", "starred_url": "https://api.github.com/users/behnam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/behnam/subscriptions", "organizations_url": "https://api.github.com/users/behnam/orgs", "repos_url": "https://api.github.com/users/behnam/repos", "events_url": "https://api.github.com/users/behnam/events{/privacy}", "received_events_url": "https://api.github.com/users/behnam/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-09T14:42:31Z", "updated_at": "2018-09-09T14:42:31Z", "author_association": "CONTRIBUTOR", "body": "I see. Thanks for the explanation, @ehuss.\r\n\r\nNow, then, first, I believe we need to make sure the docs are explaining this better. The word \"upstream\" is not defined clearly in the specs, and the actual compiler doc is even missing the word.\r\n\r\nApparently, there's also another matter here: the `cap-lints` flag doesn't apply to \"derive\" implementations. This also seems unintentional and undesired in this direction. Basically, again with the introduction of a new compiler lint rule, my crate started failing with error because of a `serde_derive` issue. (Example: <https://travis-ci.org/open-i18n/rust-unic/jobs/422840730#L3838>) I didn't see a discussion or tracker for this. Should we file one?\r\n\r\nAnd, I believe there should be more docs around macro/derive behavior, as well.\r\n\r\nWhat do you think?"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/419726557", "html_url": "https://github.com/rust-lang/cargo/issues/5998#issuecomment-419726557", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5998", "id": 419726557, "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTcyNjU1Nw==", "user": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars0.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-09T16:13:59Z", "updated_at": "2018-09-09T16:13:59Z", "author_association": "CONTRIBUTOR", "body": "Code generated by procedural macros will be under the mercy of whatever settings you have in your crate.  I don't think it's likely that the compiler can treat it differently since it gets directly inserted in your code at a relatively early phase.  In general, using deny can be dangerous (see https://github.com/rust-unofficial/patterns/blob/master/anti_patterns/deny-warnings.md).  \r\n\r\nI imagine the documentation could clarify this behavior and include good practices.  I'm not sure where, exactly, though.  The rustc book generally doesn't document cargo behavior (I would say the existing remark is just to say \"hey, here's an example of how this is used\", not a detailed description).  There is an open PR to significantly enhance lint controls in Cargo (#5728), and I imagine that would be the perfect opportunity to document it in depth.  However, that PR seems to have stalled.\r\n"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/419728518", "html_url": "https://github.com/rust-lang/cargo/issues/5998#issuecomment-419728518", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5998", "id": 419728518, "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTcyODUxOA==", "user": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-09T16:44:50Z", "updated_at": "2018-09-09T16:44:50Z", "author_association": "MEMBER", "body": "Generally speaking derive macros are intended to be in a separate lint environment, much like edition scoping, but I don't think it's been implemented yet."}]