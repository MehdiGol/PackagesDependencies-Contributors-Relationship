[{"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/431607321", "html_url": "https://github.com/rust-lang/cargo/issues/6195#issuecomment-431607321", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/6195", "id": 431607321, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTYwNzMyMQ==", "user": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars0.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-20T18:34:44Z", "updated_at": "2018-10-20T18:34:44Z", "author_association": "CONTRIBUTOR", "body": "Some workarounds:\r\n```cargo test -p askama_testing --features \"actix\" -Z package-features```\r\nor `cd` into each directory and run `cargo test` within it.  AFAIK you can't do all packages at once.  Currently in a workspace the features selected depends on which directory you are in (`-Z package-features` changes this behavior)."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/431607913", "html_url": "https://github.com/rust-lang/cargo/issues/6195#issuecomment-431607913", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/6195", "id": 431607913, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTYwNzkxMw==", "user": {"login": "djc", "id": 158471, "node_id": "MDQ6VXNlcjE1ODQ3MQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/158471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djc", "html_url": "https://github.com/djc", "followers_url": "https://api.github.com/users/djc/followers", "following_url": "https://api.github.com/users/djc/following{/other_user}", "gists_url": "https://api.github.com/users/djc/gists{/gist_id}", "starred_url": "https://api.github.com/users/djc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djc/subscriptions", "organizations_url": "https://api.github.com/users/djc/orgs", "repos_url": "https://api.github.com/users/djc/repos", "events_url": "https://api.github.com/users/djc/events{/privacy}", "received_events_url": "https://api.github.com/users/djc/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-20T18:42:32Z", "updated_at": "2018-10-20T18:42:32Z", "author_association": "CONTRIBUTOR", "body": "I understand about the workaround of `cd`ing into a particular directory, but that means either making the Travis config more complex by specifying all contained crates separately, or making the test suite slower to run because some tests are run twice.\r\n\r\nSince I'm running this at the top of the workspace, I think there are two reasonable conceptual models that could work: either I'm one level \"above\" the crates, and I should be able to use a crate/feature value to select a feature in the crates, or my command is more or less \"copied\" into each crate, in which case I should be able to use the bare feature.\r\n\r\nIf neither of these work, it seems like there is a conceptual hole in the workspace implementation (or how the `test` command interacts with it)."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/431613030", "html_url": "https://github.com/rust-lang/cargo/issues/6195#issuecomment-431613030", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/6195", "id": 431613030, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTYxMzAzMA==", "user": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars0.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-20T19:53:17Z", "updated_at": "2018-10-20T19:53:17Z", "author_association": "CONTRIBUTOR", "body": "Yea, I agree there should be *some* way to do it.  Typically the form `foo/bar` for features means the `bar` feature of the `foo` dependency, but in a virtual workspace there is no `foo` dependency (there is a `foo` *member*). So it may be confusing what that actually means. It may also be confusing on how to select features when building multiple packages (which is why I believe `-Z package-features` prevents you from trying).\r\n\r\nThis has been reported several times (#4753, #4106, #4463, #5364, etc.), so you're not alone.  I'm trying to collect all the issues with features to see if there is a cohesive way to deal with them all.\r\n"}]