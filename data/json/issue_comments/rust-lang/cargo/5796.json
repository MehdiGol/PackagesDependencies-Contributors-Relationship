[{"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/408261666", "html_url": "https://github.com/rust-lang/cargo/issues/5796#issuecomment-408261666", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5796", "id": 408261666, "node_id": "MDEyOklzc3VlQ29tbWVudDQwODI2MTY2Ng==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-26T23:05:57Z", "updated_at": "2018-07-26T23:05:57Z", "author_association": "MEMBER", "body": "I think the bug here is actually these lines -- \r\n\r\nhttps://github.com/rust-lang/rust/blob/45b48b9b6d70065a16cc119fe934ed342c664c78/src/bootstrap/bootstrap.py#L613-L621\r\n\r\nMind poking at those and seeing if it fixes the issue? If so mind refiling at rust-lang/rust? (or I can reopen the previous bug)"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/408264959", "html_url": "https://github.com/rust-lang/cargo/issues/5796#issuecomment-408264959", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5796", "id": 408264959, "node_id": "MDEyOklzc3VlQ29tbWVudDQwODI2NDk1OQ==", "user": {"login": "glandium", "id": 1038527, "node_id": "MDQ6VXNlcjEwMzg1Mjc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1038527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glandium", "html_url": "https://github.com/glandium", "followers_url": "https://api.github.com/users/glandium/followers", "following_url": "https://api.github.com/users/glandium/following{/other_user}", "gists_url": "https://api.github.com/users/glandium/gists{/gist_id}", "starred_url": "https://api.github.com/users/glandium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glandium/subscriptions", "organizations_url": "https://api.github.com/users/glandium/orgs", "repos_url": "https://api.github.com/users/glandium/repos", "events_url": "https://api.github.com/users/glandium/events{/privacy}", "received_events_url": "https://api.github.com/users/glandium/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-26T23:23:52Z", "updated_at": "2018-07-26T23:23:52Z", "author_association": "NONE", "body": "I tried that already, and this didn't change anything. Which is why I moved it here."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/409037054", "html_url": "https://github.com/rust-lang/cargo/issues/5796#issuecomment-409037054", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5796", "id": 409037054, "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTAzNzA1NA==", "user": {"login": "ExpHP", "id": 1411280, "node_id": "MDQ6VXNlcjE0MTEyODA=", "avatar_url": "https://avatars0.githubusercontent.com/u/1411280?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ExpHP", "html_url": "https://github.com/ExpHP", "followers_url": "https://api.github.com/users/ExpHP/followers", "following_url": "https://api.github.com/users/ExpHP/following{/other_user}", "gists_url": "https://api.github.com/users/ExpHP/gists{/gist_id}", "starred_url": "https://api.github.com/users/ExpHP/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ExpHP/subscriptions", "organizations_url": "https://api.github.com/users/ExpHP/orgs", "repos_url": "https://api.github.com/users/ExpHP/repos", "events_url": "https://api.github.com/users/ExpHP/events{/privacy}", "received_events_url": "https://api.github.com/users/ExpHP/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-30T22:48:50Z", "updated_at": "2018-07-30T22:49:10Z", "author_association": "NONE", "body": "First, **an important premise:**  I believe the standard behavior of most applications (at least in the UNIX world) is to treat `PATH=\"\"` as equivalent to an *unset* PATH...and likewise for any other PATH-like environment variable.\r\n\r\nIf this premise is taken to be false, then as far as I can tell there is no problem.\r\n\r\n...but!  If this premise is taken to be true, then:\r\n\r\n---\r\n\r\nThe lines in `bootstrap.py` are clearly wrong in the case where `env[\"LD_LIBRARY_PATH\"] == ''`. and that issue should be reopened.  However, judging from their context, it likely only affects the build of the `bootstrap` crate.\r\n\r\n---\r\n\r\n...and cargo (or the standard library) is also doing things a bit odd, as is easily demonstrated with this:\r\n\r\n```rust\r\nuse std::env;\r\nfn main() {\r\n    println!(\"{:?}\",\r\n        env::split_paths(&env::var(\"LD_LIBRARY_PATH\").unwrap()).collect::<Vec<_>>()\r\n    );\r\n}\r\n```\r\n\r\n**`(unset LD_LIBRARY_PATH && cargo run)`** (a truly-unset variable)\r\n```\r\n[\r\n    \"/home/lampam/cpp/throwaway/env/target/debug\",\r\n    \"/home/lampam/cpp/throwaway/env/target/debug/deps\",\r\n    \"/home/lampam/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/lib\",\r\n    \"/home/lampam/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib\"\r\n]\r\n```\r\n\r\n**`LD_LIBRARY_PATH= cargo run`** (merely an empty string)\r\n```\r\n[\r\n    \"/home/lampam/cpp/throwaway/env/target/debug\",\r\n    \"/home/lampam/cpp/throwaway/env/target/debug/deps\",\r\n    \"/home/lampam/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/x86_64-unknown-linux-gnu/lib\",\r\n    \"/home/lampam/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib\",\r\n    \"\"\r\n]\r\n```\r\n\r\nIf I had to guess, this is because cargo itself uses `env::split_paths`, and `env::split_paths(\"\")` produces `[\"\"]`."}]