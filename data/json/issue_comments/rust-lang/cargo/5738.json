[{"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/405723372", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-405723372", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 405723372, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTcyMzM3Mg==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-17T20:50:58Z", "updated_at": "2018-07-17T20:50:58Z", "author_association": "MEMBER", "body": "@Mark-Simulacrum on IRC suggested we pass `-A warnings -W rust-2018-compatibility` which I think will work like a charm here! (we should test though)"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/405724217", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-405724217", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 405724217, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTcyNDIxNw==", "user": {"login": "killercup", "id": 20063, "node_id": "MDQ6VXNlcjIwMDYz", "avatar_url": "https://avatars1.githubusercontent.com/u/20063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/killercup", "html_url": "https://github.com/killercup", "followers_url": "https://api.github.com/users/killercup/followers", "following_url": "https://api.github.com/users/killercup/following{/other_user}", "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}", "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/killercup/subscriptions", "organizations_url": "https://api.github.com/users/killercup/orgs", "repos_url": "https://api.github.com/users/killercup/repos", "events_url": "https://api.github.com/users/killercup/events{/privacy}", "received_events_url": "https://api.github.com/users/killercup/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-17T20:53:52Z", "updated_at": "2018-07-17T20:53:52Z", "author_association": "MEMBER", "body": "@alexcrichton I'll give it a try, but this [previously](\r\nhttps://github.com/rust-lang-nursery/rustfix/pull/98#discussion_r187178261) didn't work"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/405726153", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-405726153", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 405726153, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTcyNjE1Mw==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-17T21:00:06Z", "updated_at": "2018-07-17T21:00:06Z", "author_association": "MEMBER", "body": "Oh bah you are indeed correct (still!).\r\n\r\nThat's due to [this block of code](https://github.com/rust-lang/rust/blob/1c84d8187395b641616649a0f16f15a78ea8bbce/src/librustc/lint/levels.rs#L103-L117).\r\n\r\nThat means probably we could either:\r\n\r\n* Fix this as a bug in rustc (maybe having lots of unintended fallout)\r\n* Pass a whole slew of `-A` and hope we get most of the ones that matter\r\n* Simply don't auto-fix anything that doesn't pass our whitelist of what to look at\r\n\r\nI'm leaning towards the last option now, but it'd probably be easier to go with the second. @killercup do you have a preference?"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/405728094", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-405728094", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 405728094, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTcyODA5NA==", "user": {"login": "killercup", "id": 20063, "node_id": "MDQ6VXNlcjIwMDYz", "avatar_url": "https://avatars1.githubusercontent.com/u/20063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/killercup", "html_url": "https://github.com/killercup", "followers_url": "https://api.github.com/users/killercup/followers", "following_url": "https://api.github.com/users/killercup/following{/other_user}", "gists_url": "https://api.github.com/users/killercup/gists{/gist_id}", "starred_url": "https://api.github.com/users/killercup/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/killercup/subscriptions", "organizations_url": "https://api.github.com/users/killercup/orgs", "repos_url": "https://api.github.com/users/killercup/repos", "events_url": "https://api.github.com/users/killercup/events{/privacy}", "received_events_url": "https://api.github.com/users/killercup/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-17T21:06:54Z", "updated_at": "2018-07-17T21:06:54Z", "author_association": "MEMBER", "body": "Great research!\r\n\r\nI think the last option might be one with the least issues going forward \u2013 adjusting an allow-list when people add new edition specific lints is trivial. What do you mean with \"easier to go with the second\" \u2013 tracking (and keeping track of!) all enabled-by-default lints in rustc for the foreseeable future? Sheesh!"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/405728344", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-405728344", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 405728344, "node_id": "MDEyOklzc3VlQ29tbWVudDQwNTcyODM0NA==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-07-17T21:07:39Z", "updated_at": "2018-07-17T21:07:39Z", "author_association": "MEMBER", "body": "Oh more just easier to implement because it's just modifying a string that's already in the code :)\r\n\r\nI'm cool w/ the third option though!"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/410287034", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-410287034", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 410287034, "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDI4NzAzNA==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-03T15:21:10Z", "updated_at": "2018-08-03T15:21:10Z", "author_association": "MEMBER", "body": "Bumping this to the RC1 milestone"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/417129504", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-417129504", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 417129504, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzEyOTUwNA==", "user": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-29T22:36:58Z", "updated_at": "2018-08-30T05:03:49Z", "author_association": "MEMBER", "body": "I had a go at fixing this in #5948 (using the third option), but Alex notes:\r\n\r\n> unfortunately the list of lints in `rust-*-compatibility` is changing over time pretty rapidly, so while it's possible in a pinch we could go with that strategy I'd personally prefer to avoid doing so\r\n\r\nbut suggests we could still go with this option by changing the compiler to get the lint to expose its lint group and using that.\r\n\r\nBut it might be fun to see how to fix rustc so `-A warnings -W rust-2018-compatibility` honours precedence, _and_ see what kind of fallout that has.\r\n\r\nEither way I'd need some rustc mentorship."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/417144023", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-417144023", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 417144023, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzE0NDAyMw==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-29T23:47:51Z", "updated_at": "2018-08-29T23:47:51Z", "author_association": "MEMBER", "body": "Yeah and to recap what we discussed, two ideas I have for fixing this in rustc are:\r\n\r\n* First, fix how rustc handles `-A warnings -W rust-2018-compatibility` to actually work\r\n* Second, include the lint group in the diagnostic message somehow so we can read it out\r\n\r\nI'm not sure how to do the latter but the former is related to [this block of code](https://github.com/rust-lang/rust/blob/1c84d8187395b641616649a0f16f15a78ea8bbce/src/librustc/lint/levels.rs#L103-L117). I think to fix that we'd basically want to remove that block entirely and handle `-A warnings` elsewhere (e.g. setting all lints to \"allow\" that are otherwise \"warn\" early on). \r\n\r\n@dwijnand are you interested in doing the `-A warnings` strategy? If so I can try to help out to guide you in rustc for that!"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/417190952", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-417190952", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 417190952, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzE5MDk1Mg==", "user": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-30T05:04:57Z", "updated_at": "2018-08-30T05:04:57Z", "author_association": "MEMBER", "body": "Yep!"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/417382309", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-417382309", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 417382309, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzM4MjMwOQ==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-30T16:30:16Z", "updated_at": "2018-08-30T16:30:16Z", "author_association": "MEMBER", "body": "Ok so the general idea is that during linting we walk the entire AST, keeping a set of the current lint levels for all lints. This set is modified whenever we encounter lint attributes, and is otherwise automatically managed whenever we walk up/down the AST.\r\n\r\nOverall this means that when issuing a lint you don't actually say anything about the lint level. Only during the linting passes do we later realize what the lint level actually is and that dictates how the lint itself is issued. Currently there's a hardwired statement (linked above) which simply treats all warnings as being overriden by the lint `warnings` lint level.\r\n\r\nI think instead we'll want to tweak how the \"warnings\" lint is treated. Instead of having it override, we should have processing of the \"warnings\" lint be special (whenever we see an attribute or a CLI flag changing it). Changing the warnings lint should change all lints that are currently set to warn to allow. This means that we'd process `allow(warnings)` in a scoped fashion rather than a \"let's force change things\" fashion.\r\n\r\nDoes that makes sense?\r\n\r\nIf so, I think this will change by tewaking [this enum](https://github.com/rust-lang/rust/blob/1c84d8187395b641616649a0f16f15a78ea8bbce/src/librustc/lint/levels.rs#L34-L45) to have special dedicated fields in each variant for \"the warnings lint changed\". The [special warnings handling block](https://github.com/rust-lang/rust/blob/1c84d8187395b641616649a0f16f15a78ea8bbce/src/librustc/lint/levels.rs#L103-L117) would be removed and instead the [`get_lint_id_level`](https://github.com/rust-lang/rust/blob/1c84d8187395b641616649a0f16f15a78ea8bbce/src/librustc/lint/levels.rs#L130-L157) function would take `-A warnings` into account."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/417482126", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-417482126", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 417482126, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzQ4MjEyNg==", "user": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-30T22:04:37Z", "updated_at": "2018-08-30T22:04:37Z", "author_association": "MEMBER", "body": "After several passes, yes.\r\n\r\nBut to drive it home could you give me a few working and not working examples (expected vs intended behaviour)? I'm actually not too familiar with rust's lints or rustc's CLI. Thanks!"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/417802786", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-417802786", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 417802786, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzgwMjc4Ng==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-08-31T22:15:18Z", "updated_at": "2018-08-31T22:15:18Z", "author_association": "MEMBER", "body": "Sure!\r\n\r\n* [This should generate a warning](https://play.rust-lang.org/?gist=e13ed11de54f256c4ed7f4df06a19252&version=stable&mode=debug&edition=2015)\r\n* [This should continue to not generate a warning](https://play.rust-lang.org/?gist=6d4654539382c8afccbbec99efd3b6a3&version=stable&mode=debug&edition=2015)\r\n* [This should generate a warning](https://play.rust-lang.org/?gist=f5f7fd468e113e4995eb2293747733cd&version=stable&mode=debug&edition=2015)\r\n\r\nAnd... that's probably mostly it!\r\n\r\nThe handling of levels in crate is pretty similar to handling of levels on the CLI, so these can be translated roughly to cli flags as well"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/417831253", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-417831253", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 417831253, "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzgzMTI1Mw==", "user": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-01T04:12:41Z", "updated_at": "2018-09-01T04:12:41Z", "author_association": "MEMBER", "body": "Alright, thank you. I'll see what I can do."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/420866583", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-420866583", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 420866583, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMDg2NjU4Mw==", "user": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-13T02:54:52Z", "updated_at": "2018-09-13T02:54:52Z", "author_association": "MEMBER", "body": "Hey @alexcrichton,\r\n\r\nSo after some initial troubles getting started with rustc development, I've finally been able to play with this part of the compiler to see if I can figure it out.\r\n\r\nUnfortunately progress is quite slow. Could you explain to me more what you had in mind when you said the `get_lint_id_level` function would take `-A warnings` into account?"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/421128226", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-421128226", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 421128226, "node_id": "MDEyOklzc3VlQ29tbWVudDQyMTEyODIyNg==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-09-13T19:41:17Z", "updated_at": "2018-09-13T19:41:17Z", "author_association": "MEMBER", "body": "Sure yeah! So `get_lint_id_level` is tasked with the job of given a node id a crate (like an expression or something like that), determining what the lint level is of a particular lint. To do this it starts at the node and walks upwards. (the current node is represented by the `aux` map).\r\n\r\nThe lint level is then determined by the first node we actually find. As we walk upwards we'll find `#[allow]` (lint attributes) and finally the last thing we walk up to is the command line itself. If all else fails we then return `LintSource::Default`, which indicates that we should use whatever the default level is.\r\n\r\nInstead what needs to happen is what while we're doing this traversal we need to also keep track of the state of the `Warnings` lint (as configured by the innermost option). If the warnings lint is set to allow and we othrewise figure out that this specific lint is set to `warn` then it should actually be forced to allow. If the lint in question becomes `deny` though we just return `deny`.\r\n\r\nDoes that make sense?"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/430285076", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-430285076", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 430285076, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDI4NTA3Ng==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-16T15:33:53Z", "updated_at": "2018-10-16T15:33:53Z", "author_association": "MEMBER", "body": "@dwijnand circling back around to this, it looks like https://github.com/rust-lang/cargo/issues/6178 is another instance of this. I'm guessing though that not much progress was made on the rustc side of things?"}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/430286634", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-430286634", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 430286634, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDI4NjYzNA==", "user": {"login": "dwijnand", "id": 344610, "node_id": "MDQ6VXNlcjM0NDYxMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/344610?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwijnand", "html_url": "https://github.com/dwijnand", "followers_url": "https://api.github.com/users/dwijnand/followers", "following_url": "https://api.github.com/users/dwijnand/following{/other_user}", "gists_url": "https://api.github.com/users/dwijnand/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwijnand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwijnand/subscriptions", "organizations_url": "https://api.github.com/users/dwijnand/orgs", "repos_url": "https://api.github.com/users/dwijnand/repos", "events_url": "https://api.github.com/users/dwijnand/events{/privacy}", "received_events_url": "https://api.github.com/users/dwijnand/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-16T15:38:12Z", "updated_at": "2018-10-16T15:38:12Z", "author_association": "MEMBER", "body": "No rustc continues to defeat me, for now.  But being a sucker for the sunk cost fallacy I might come back to this before the year is out..."}, {"url": "https://api.github.com/repos/rust-lang/cargo/issues/comments/430311999", "html_url": "https://github.com/rust-lang/cargo/issues/5738#issuecomment-430311999", "issue_url": "https://api.github.com/repos/rust-lang/cargo/issues/5738", "id": 430311999, "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDMxMTk5OQ==", "user": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars1.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "created_at": "2018-10-16T16:49:17Z", "updated_at": "2018-10-16T16:49:17Z", "author_association": "MEMBER", "body": "Ok no worries! Feel free to reach out with any issues of course"}]